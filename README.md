![Build](https://github.com/myacey/avito-backend-assignment-pvz/actions/workflows/ci.yaml/badge.svg?branch=main)
# Бэкенд для сервиса ПВЗ

## Описание
В этом репозитории представлена реализация бэкенда для сервиса ПВЗ. Взаимодействие с сервисом происходит следующим образом:

1. Необходимо получить токен. Авторизация происходит двумя способами: через эндпоинт `/dummyLogin` или зарегестрироваться через `/register`, затем залогиниться через `/login`, тем самым получив `jwt` токен.
2. Модератор может создать ПВЗ через эндпоинт `/pvz`.
3. Сотрудник (employee) может создавать приемки товаров, добавлять и удалять из них товары, а также закрывать приемки.

## Решение
Сервис написан на Golang с использованием фреймворка [gin](https://gin-gonic.com/).

Для взаимодействия с базой данный используется [sqlc](https://sqlc.dev/).

Для генерации и проверки токенов используется библиотека [golang-jwt](https://github.com/golang-jwt/jwt).

Для хранения данных используется PostgreSQL, в котором с помощью миграций созданы таблицы пользователей, ПВЗ, приемок заказов, товаров. Реализованы индексы для быстрого поиска, триггеры для предотвращения ошибок.

## Сборка и Деплой

Все необходимые операции осуществляются с помощью `Docker` и `Makefile`:

- Чтобы запустить сервис, достаточно выполнить `make up` (или же `docker compose up --build -d`).
- Чтобы остановить серсис, выполните: `make stop`.

## Тесты
Чтобы запустить юнит тесты, выполните: `make unit`

Чтобы запустить все тесты (включая интеграционные), выполните: `make test`
> [!NOTE]
> Для того, чтобы запустились интеграционные тесты, сервис должен быть запущен 

